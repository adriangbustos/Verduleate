<body>
    <p-toast />

    <section class="login-layout">
        <div class="form-panel">
            <button type="button" class="brand" (click)="goToHome()" aria-label="Ir al inicio">
                <img src="../../../assets/NewLandingAssets/logo-completo.png" alt="Verduleate" />
            </button>

            <form [formGroup]="loginForm" class="login-card">
                <h1>Bienvenido de vuelta,</h1>
                <p class="subtext">Ingresa a tu cuenta</p>

                <button type="button" class="google-button" (click)="loginWithGoogle()">
                    <i class="fa-brands fa-google"></i>
                    <span>Continuar con Google</span>
                </button>

                <div class="divider"><span>o</span></div>

                <label class="field-label" for="email">Email</label>
                <input (blur)="showError('email')" (input)="checkTouched('email')" id="email" type="text"
                    formControlName="email" placeholder="Email" />

                <div class="field-row">
                    <label class="field-label" for="password">Contraseña</label>
                    <button type="button" class="forgot-link" (click)="showDialog()">Olvidó su contraseña?</button>
                </div>
                <div class="password-container">
                    <input [type]="passwordVisible ? 'text' : 'password'" formControlName="password" id="password"
                        placeholder="Contraseña" />
                    <button type="button" (click)="togglePasswordVisibility()" aria-label="Mostrar contraseña">
                        <i class="fa-regular" [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"
                            [ngStyle]="{ opacity: 0.6}"></i>
                    </button>
                </div>

                <p-button (click)="login()" label="Iniciar Sesion" type="submit" styleClass="login-button"></p-button>

                <p class="signup-text">
                    <span style="color: grey;">No tiene una cuenta?</span>
                    <a (click)="goToSignUp()">Cree Una</a>
                </p>
            </form>

            <p class="terms-text">
                Al continuar, usted acepta los <span class="link">Terminos & Condiciones</span> y la
                <span class="link">Politica de Privacidad</span> de Verduleate, y a recibir correos promocionales
                periodicos.
            </p>
        </div>

        <div class="hero-panel" aria-hidden="true">
            <div class="hero-card">
                <p class="hero-text">Del Campo a tu Mesa</p>
            </div>
        </div>
    </section>

    <div *ngIf="isLoading" class="popup">
        <div class="loading-container">
            <div class="spinner"></div>
            <p>Entrando a su cuenta...</p>
        </div>
    </div>

    <p-dialog header="Reestablecer Contraseña" [draggable]="false" [modal]="true" [(visible)]="visible"
        [style]="{ width: '25rem' }">
        <div class="flex align-items-center gap-3 mb-5">
            <label for="email" class="font-semibold w-6rem">Correo</label>
            <input pInputText id="email" class="flex-auto" [(ngModel)]="correo" autocomplete="off" />
        </div>
        <div class="flex justify-content-end gap-2">
            <p-button (onClick)="recoverPassword()" label="Reestablecer" styleClass="password-button"
                (onClick)="visible = false" />
        </div>
    </p-dialog>
</body>